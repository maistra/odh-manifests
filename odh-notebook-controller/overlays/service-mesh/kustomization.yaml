apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
bases:
- ../../base

configMapGenerator:
- name: config
  behavior: merge
  envs:
  - ossm.env

# needs to be `patchesJson6902`, `patches` seems to be ignored
# also: inline patches do not work, operator complains about overlays/service-mesh being
# a directory and not a kustomization.yaml file
patchesJson6902:
- path: role-patch.yaml
  target:
    group: rbac.authorization.k8s.io
    version: v1
    kind: ClusterRole
    name: manager-role

## FIXME: Temporary until odh-dashboard PR is merged upstream
images:
- name: quay.io/opendatahub/odh-notebook-controller
  newName: quay.io/maistra-dev/odh-notebook-controller
  newTag: service-mesh-integration
